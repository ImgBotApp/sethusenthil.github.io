!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.myPlugin=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t,n,o,i,l,u={},c=!!document.querySelector&&!!e.addEventListener,r={newTitle:"Please Don't Go",newFavicon:"/assets/images/favicon-dontgo.ico",timeout:2e3},s=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(n,e[o],o,e);else for(var i=0,l=e.length;i<l;i++)t.call(n,e[i],i,e)},f=function(e,t){var n={};return s(e,function(t,o){n[o]=e[o]}),s(t,function(e,o){n[o]=t[o]}),n},a=function(e){return"string"!=typeof e.newTitle?(console.log("newTitle must be a string."),!1):"string"!=typeof e.newFavicon?(console.log("newFavicon must be a string."),!1):"number"==typeof e.timeout||(console.log("timeout must be a number."),!1)},d=function(e){o=document.querySelectorAll('[rel="icon"]')[0],i=document.title,l=o.href,document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState?setTimeout(function(){document.title=e.newTitle,o.setAttribute("href",e.newFavicon)},e.timeout):(document.title=i,o.setAttribute("href",l))})};u.destroy=function(){t&&(t=null,o=null,i=null,l=null)},u.init=function(e){c&&(u.destroy(),t=f(r,e||{}),n=a(t),n&&d(t))},window.pleaseDontGo=u});